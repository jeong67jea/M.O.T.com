
/* ===== v4: iOS 100vw overflow fix + safe-area padding + overlay states ===== */
@media (max-width: 768px), (hover: none){
  /* Closed state */
  header.navbar nav.primary{ display:none; }
  /* Open overlay: avoid 100vw/100dvh; use inset + min-height, and svw/svh when available */
  header.navbar:has(#menu-toggle:checked) nav.primary{
    display:block;
    position:fixed;
    inset:0;
    background:#fff;
    z-index:200000;
    padding: env(safe-area-inset-top, 0) 16px env(safe-area-inset-bottom, 0) 16px;
    overflow-y:auto;
    -webkit-overflow-scrolling:touch;
    min-height:100dvh;
  }
  @supports (width: 100svw){
    header.navbar:has(#menu-toggle:checked) nav.primary{
      width:100svw;
      min-height:100svh;
    }
  }
  /* Lock the page behind overlay */
  body:has(#menu-toggle:checked){ overflow:hidden; overscroll-behavior:contain; }
  html{ overflow-x:hidden; }
  body{ max-width:100%; }
  /* Keep header to one line */
  header.navbar .inner{ display:flex; align-items:center; justify-content:space-between; gap:8px; white-space:nowrap; }
  header.navbar .lang{ display:none !important; }
  header.navbar:has(#menu-toggle:checked) .lang{ display:flex !important; margin-top:8px; }
  .menu-burger{ display:inline-block; user-select:none; cursor:pointer; padding:8px 10px; font-size:20px; border-radius:8px; }
  header.navbar:has(#menu-toggle:checked) .menu-burger{ position:fixed; top:10px; right:12px; z-index:200010; }
  header.navbar:has(#menu-toggle:checked) nav.primary .menu{ display:flex; flex-direction:column; align-items:flex-start; gap:12px; }
  header.navbar:has(#menu-toggle:checked) nav.primary .submenu{ position:static; display:block; box-shadow:none; border:none; padding-left:12px; z-index:200020; }
}

/* Global overflow guards */
html, body{ max-width:100%; overflow-x:hidden; }
*,
*::before,
*::after{ box-sizing:border-box; }
:where(img, video, svg, canvas){ max-width:100%; height:auto; display:block; }
:where([style*="width:" i]){ max-width:100% !important; }
:where([style*="left:" i], [style*="right:" i]){ left:auto !important; right:auto !important; }

/* Banners should not push width */
[class*="hero"], [class*="banner"], .hero, .banner{
  background-size:cover !important;
  background-position:center !important;
  background-repeat:no-repeat !important;
  overflow:hidden;
}

/* Carousel interaction preserved when overlay closed */
.hero .carousel, .carousel{ position:relative; z-index:1; overflow:hidden; touch-action: pan-x pan-y; }
